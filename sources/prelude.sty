\ProvidesPackage{prelude}

% Packages to import
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{titlesec}
\usepackage[titles]{tocloft}
\usepackage{xcolor}
\usepackage{sectsty}
\usepackage{etoolbox}
\usepackage[framemethod=tikz]{mdframed}
\usepackage{geometry}
\usepackage{tikz-cd}
% Margins
\geometry{hmargin=1.5cm,vmargin=1.5cm}


% Formatted letters
\newcommand{\bC}{\mathbb{C}}
\newcommand{\bR}{\mathbb{R}}
\newcommand{\bN}{\mathbb{N}}
\newcommand{\bZ}{\mathbb{Z}}
\newcommand{\bQ}{\mathbb{Q}}
\newcommand{\bK}{\mathbb{K}}
\newcommand{\bF}{\mathbb{F}}
\newcommand{\bM}{\mathbb{M}}
\newcommand{\bGL}{\mathbb{GL}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cO}{\mathcal{O}}


% Text command for text strings I need to type in math mode
\newcommand{\Diag}{\text{Diag}}
\newcommand{\Vect}{\text{Vect}}
\newcommand{\sign}{\text{sgn}}

\renewcommand{\char}{\text{char}}
\renewcommand{\Im}{\text{Im}}

% Colors
\definecolor{BlueGreen}{rgb}{0.0,0.6,0.7}
\definecolor{BlueGreen2}{rgb}{0.0,0.8,0.7}
\definecolor{LightBlue}{rgb}{0.0,0.2,0.7}
\definecolor{ocre}{RGB}{0, 113, 188}

% Generic n x n matrix

\newcommand{\MatNxN}[1][\lambda]{\begin{pmatrix}
    #1_{1, 1} &\cdots &#1_{1,n} \\
    \vdots    &\ddots &\vdots \\
    #1_{n, 1} &\cdots &#1_{n, n}
\end{pmatrix}
}

% Defines counters for results (proposition, corollary and theorems) and definitions


% Defines theorem, definition, proof.. environments
\theoremstyle{definition}
\newmdtheoremenv[
  hidealllines=true,
  leftline=true,
  innerleftmargin=10pt,
  innerrightmargin=10pt,
  innertopmargin=0pt,
  linecolor=ocre,
  linewidth=3pt
]{definition}{Définition}[section]

\theoremstyle{plain}
\newmdtheoremenv[
  hidealllines=true,
  leftline=true,
  innerleftmargin=10pt,
  innerrightmargin=10pt,
  innertopmargin=0pt,
  linecolor=BlueGreen,
  linewidth=3pt
]{proposition}{Proposition}[section]

\theoremstyle{plain}
\newmdtheoremenv[
  hidealllines=true,
  leftline=true,
  innerleftmargin=10pt,
  innerrightmargin=10pt,
  innertopmargin=0pt,
  linecolor=BlueGreen,
  linewidth=3pt
]{lemme}{Lemme}[section]

\theoremstyle{plain}
\newmdtheoremenv[
linecolor=ocre,
roundcorner=2pt,
linewidth=3pt,
innertopmargin=0pt,
]{theoreme}{Théorème}[section]

\theoremstyle{plain}
\newmdtheoremenv[
  hidealllines=true,
  leftline=true,
  innerleftmargin=10pt,
  innerrightmargin=10pt,
  innertopmargin=0pt,
  linecolor=BlueGreen2,
  linewidth=3pt
]{corollaire}{Corollaire}[section]

\theoremstyle{plain}
\newmdtheoremenv[
  hidealllines=true,
  leftline=true,
  innerleftmargin=10pt,
  innerrightmargin=10pt,
  innertopmargin=0pt,
  linecolor=LightBlue,
  linewidth=3pt
]{exercice}{Exercice}[section]

\newenvironment{preuve}{\textcolor{ocre}{\textit{Preuve.}}}{}

% Removes the 
\renewcommand{\qedsymbol}{}

% Makes every math displayed in display style 
\everymath{\displaystyle}

% Changes default font
\renewcommand\familydefault{\sfdefault}

% Avoids alineas at the beginning of a new paragraph 
\setlength{\parindent}{0cm}



% Formates the links in the table of contents 
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

%%%%%%%%%%%% Table of contents %%%%%%%%%%%%

% Change TOC name
\renewcommand{\contentsname}{Table des matières}

% Changes chapter formatting in the table of contents
\newcommand{\cftchapfont}{\LARGE\bfseries\hypersetup{linkcolor=ocre}}
\newcommand{\cftchappagefont}{\LARGE\bfseries\color{ocre}}
\newcommand{\cftchapleader}{\LARGE\bfseries\color{ocre}\cftdotfill{\cftsecdotsep}}
\newcommand{\cftchapdotsep}{6}
\newcommand{\cftchapafterpnum}{\vskip15pt}

% Changes section formatting in the table of contents
\renewcommand{\cftsecfont}{\Large\bfseries}
\renewcommand{\cftsecpagefont}{\Large\bfseries}
\renewcommand{\cftsecleader}{\hfill}
\renewcommand{\cftsecafterpnum}{\vskip10pt}

% Changes subsection formatting in the table of contents
\renewcommand{\cftsubsecafterpnum}{\vskip10pt}
\renewcommand{\cftsubsecfont}{\large}
\renewcommand{\cftsubsecpagefont}{\large}

% Changes subsection formatting in the table of contents
\renewcommand{\cftsubsubsecafterpnum}{\vskip10pt}
\renewcommand{\cftsubsubsecfont}{\medium}
\renewcommand{\cftsubsubsecpagefont}{\medium}

% Avoids indentations in the TOC
\setlength{\cftsecindent}{0pt}
\setlength{\cftsubsecindent}{0pt}
\setlength{\cftsubsubsecindent}{5pt}

%%%%%%%%%%%% Chapter, section.. formating %%%%%%%%%%%%
\chapterfont{\color{ocre}}

% Changes chapter's title format
\titleformat{\chapter}[display]{\normalfont\bfseries}{}{0pt}{\fontsize{24}{10}\bfseries\color{ocre}}

% Avoids page breaks after chapter
\patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{}{}{}
